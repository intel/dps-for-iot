<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Distributed Publish Subscribe for IoT: Introduction to Distributed Publish Subscribe for IoT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Distributed Publish Subscribe for IoT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_tmalsbar_src_github.com_01org_dps-for-iot_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction to Distributed Publish Subscribe for IoT </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
<h3>Note: This is a preview release of the software and is intended for evaluation and experimentation only.</h3>
<hr/>
<h2>Install prerequisites</h2>
<h3>Linux</h3>
<ul>
<li>gcc</li>
<li><a href="http://scons.org/pages/download.html">SCons</a></li>
<li>libuv is used by node.js so packages are available for many distributions but note that DPS requires libuv 1.7 or later so it may be necessary to build libuv from source. <a href="https://github.com/libuv">libuv source code on GitHub.</a></li>
<li><a href="http://www.swig.org/download.html">SWIG</a> <hr/>
</li>
</ul>
<h3>Windows</h3>
<ul>
<li><p class="startli"><a href="https://www.visualstudio.com/downloads/">Visual Studio</a></p>
<p class="startli">Note: In Visual Studio 2015, Visual C++ is not installed by default. When installing, be sure to choose <b>Custom</b> installation and then choose the C++ components you require. Or, if Visual Studio is already installed, choose <b>File | New | Project | C++</b> and you will be prompted to install the necessary components.</p>
</li>
<li><a href="https://www.python.org/downloads/windows/">Latest Python 2.7 Release</a></li>
<li><p class="startli"><a href="http://scons.org/pages/download.html">SCons</a></p>
<p class="startli">Note: The SCons installer will not detect the 64-bit installation of Python. Instead, download the zip file and follow the installation instructions in SCons README.txt.</p>
</li>
<li><a href="http://dist.libuv.org/dist/">libuv</a></li>
<li><a href="http://www.swig.org/download.html">SWIG</a> <hr/>
</li>
</ul>
<h3>Yocto</h3>
<ul>
<li>Yocto Project through the OpenEmbedded build system provides an open source development environment targeting the ARM, MIPS, PowerPC and x86 architectures for a variety of platforms including x86-64 and emulated ones. <a href="https://git.yoctoproject.org/">Yocto git</a></li>
</ul>
<p><a href="http://www.yoctoproject.org/docs/1.8/yocto-project-qs/yocto-project-qs.html">Yocto Project Quick Start</a></p>
<ul>
<li><a href="https://layers.openembedded.org/layerindex/recipe/32082/">Yocto libuv</a> <hr/>
</li>
</ul>
<h2>Documentation</h2>
<p>The C API documentation is generated using Doxygen. There is currently no support for generating API documentation for the Python or JS APIs.</p>
<p>Doxygen can be downloaded from here: <a href="http://www.stack.nl/~dimitri/doxygen/download.html">Doxygen</a></p>
<p>Building the documentation requires the scons <a href="https://bitbucket.org/scons/scons/wiki/DoxygenBuilder">DoxygenBuilder</a> tool. This <a href="https://bitbucket.org/scons/scons/wiki/ToolsIndex">page</a> has instructions on how to install the builder. </p><hr/>
 <h2>Build</h2>
<h3>Linux and Windows</h3>
<p>To build the DPS libraries, examples, bindings, and documentation run 'scons'.</p>
<p><code>$ scons [variant=debug|release] [transport=udp|tcp] [bindings=all|none]</code></p>
<p>To see the complete list of build options trune <code>scons --help</code></p>
<p>The default build configuration is <code>variant=release transport=udp bindings=all</code>. </p><blockquote class="doxtable">
<p><em>A limitation of the current implementation is that the transport must be configured at compile time.</em> </p>
</blockquote>
<p>The scons script pulls down source code from two external projects (tinycrypt and safestringlib) into the <code>./ext</code> directory. If necessary these projects can be populated manually:</p>
<p><code>git clone <a href="https://github.com/01org/tinycrypt.git">https://github.com/01org/tinycrypt.git</a> ext/tinycrypt</code></p>
<p><code>git clone <a href="https://github.com/01org/safestringlib.git">https://github.com/01org/safestringlib.git</a> ext/safestring</code></p>
<blockquote class="doxtable">
<p>Note: the ext projects are populated the first time DPS is built. To update these projects you need to manually do a <code>git pull</code> or delete the project directory and rerun scons. </p>
</blockquote>
<hr/>
<h3>Yocto</h3>
<p>Clone the poky repository and configure the Yocto environment. Refer to <a href="http://www.yoctoproject.org/docs/1.8/yocto-project-qs/yocto-project-qs.html">Yocto Project Quick Start</a> for more information.</p>
<p>Clone the libuv Yocto project and yocto/recipes-connectivity/dps to the Yocto Project directory. Modify the value of SRCREV_dps in dps_git.bb to the last commit of dps.</p>
<p>The Yocto Project directory needs to be included in BBLAYERS of conf/bblayers.conf. Refer to <a href="https://wiki.yoctoproject.org/wiki/How_do_I">Yocto Wiki</a> for more information.</p>
<p>From the root directory of the Yocto Project, initialize the Yocto environment, provide a meaningful build directory name and build Yocto DPS.</p>
<p><code>$ source oe-init-build-env mybuilds</code></p>
<p><code>$ bitbake dps</code> </p><hr/>
<h2>Examples</h2>
<p>There are C, Python, and JS (node.js) examples.</p>
<p>The C examples are found in <code>./examples</code>, the Python examples are in <code>./py_scripts</code> and the JS examples are in <code>./js_scripts</code>. There are currently six C samples:</p>
<ul>
<li><p class="startli"><b>publisher.c</b></p>
<p class="startli">This application shows how to initialize a DPS node, create a publication and send it. It supports IP multicast or publication to a specific host and port number over the configured transport (udp or tcp). Optionally the application will request acknowledgments from the receiving subscribers. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;publisher a/b/c &quot;hello world&quot;</div></div><!-- fragment --><p> sends a single publication to the topic string <b>a/b/c</b> and exits.</p>
</li>
<li><p class="startli"><b>subscriber.c</b></p>
<p class="startli">This application is the subscription counterpart to publisher.c, it creates a subscription and either listens for multicast publications or links another node to form a subscriber mesh. With the following commands the subscriber application listens for multicast subscriptions that match the specified topic string. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;subscriber a/b/c</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;subscriber a/+/c</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;subscriber a/#</div></div><!-- fragment --><p> In the examples above the subscriptions all match <b>a/b/c</b>. On receiving a matching publication the application prints out the subscription topic string that was matched and all the topic strings that were in the publication, if the publication had a payload that is printed also.</p>
</li>
<li><p class="startli"><b>registry.c</b></p>
<p class="startli">This applications uses DPS to implement an experimental discovery service. There are two companion applications, <em>reg_pubs</em> and <em>reg_subs</em> described below that make use of this service to find and join a mesh identified by a <em>tenant</em> topic string.</p>
</li>
<li><p class="startli"><b>reg_pubs.c</b></p>
<p class="startli">This application is similar to <em>publisher</em> but it uses the <em>registry</em> service to find other nodes to link with. The result is a randomly multiply-connected mesh.</p>
</li>
<li><p class="startli"><b>reg_subs.c</b></p>
<p class="startli">This application is subscription counterpart to <em>reg_subs</em>, it uses the <em>registry</em> service to find other node and links into the mesh.</p>
</li>
<li><p class="startli"><b>pub_many.c</b></p>
<p class="startli">This is application sends a series of publications as fast as they are acknowledged. It can be used with the <em>subscriber</em> application.</p>
</li>
</ul>
<p>The C examples are installed in <code>./build/dist/bin</code>. There are some some test scripts in <code>./test_scripts</code> that run some more complex scenarios using the example programs. The test script <b>tree1</b> builds a small mesh and shows how publications sent to any node in the mesh get forwarded to the matching subscribers. The script <b>reg1</b> uses the <em>registry</em>, <em>reg_pubs</em>, and <em>reg_subs</em> examples programs to build a dynamic mesh using the experimental discovery service. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div class="navpath" id="nav-path">
  <ul>
    <li class="footer" style="float:left"><b>Distributed PubSub Manual</b></li> <li class="footer">Generated Thu Sep 7 2017 15:03:30</li>
  </ul>
</div>
</body>
</html>
